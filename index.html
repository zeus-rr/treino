<!doctype html>
<html lang="pt-BR" class="dark">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>TREINO PROFESSORA JAQUE</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class', 
            theme: { extend: { colors: { 'primary': '#6366f1', 'bg-dark': '#0b0f1a' } } }
        }
    </script>
    <style>
        .is-conjugated { margin-bottom: -1rem !important; border-bottom-left-radius: 0 !important; border-bottom-right-radius: 0 !important; border-bottom: 2px dashed #6366f1 !important; z-index: 10; }
        .is-conjugated + .workout-item { border-top-left-radius: 0 !important; border-top-right-radius: 0 !important; }
        .is-student-mode .admin-ui, .is-student-mode .edit-btn { display: none !important; }
        .is-student-mode main { grid-template-columns: 1fr !important; }
        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #6366f1; border-radius: 10px; }
        .category-content { display: none; }
        .category-content.active { display: block; }
    </style>
</head>
<body class="bg-slate-100 dark:bg-[#0b0f1a] text-slate-800 dark:text-slate-100 font-sans antialiased">

    <header class="p-4 border-b border-slate-200 dark:border-slate-800 bg-white/80 dark:bg-slate-900/80 backdrop-blur-md sticky top-0 z-50 no-print">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <h1 class="text-xl font-black italic uppercase tracking-tighter">PROFESSORA<span class="text-primary">JAQUE</span></h1>
            <div id="studentDisplayHead" class="text-sm font-bold text-primary"></div>
        </div>
    </header>

    <main class="max-w-[1600px] mx-auto p-4 grid grid-cols-1 lg:grid-cols-12 gap-6">
        
        <aside class="lg:col-span-4 space-y-4 admin-ui">
            <div class="bg-white dark:bg-slate-900 p-6 rounded-[2rem] shadow-xl border border-slate-200 dark:border-slate-800">
                <input type="text" id="studentName" oninput="updateHeader()" placeholder="Nome do Aluno" class="w-full bg-slate-100 dark:bg-slate-800 p-3 rounded-xl border-none outline-none focus:ring-2 focus:ring-primary mb-3 font-bold">
                <select id="daySelector" class="w-full bg-slate-100 dark:bg-slate-800 p-3 rounded-xl border-none outline-none focus:ring-2 focus:ring-primary font-bold text-sm">
                    <option value="segunda">Segunda-feira</option>
                    <option value="terca">TerÃ§a-feira</option>
                    <option value="quarta">Quarta-feira</option>
                    <option value="quinta">Quinta-feira</option>
                    <option value="sexta">Sexta-feira</option>
                    <option value="sabado">SÃ¡bado</option>
                </select>
            </div>

            <div class="bg-white dark:bg-slate-900 p-6 rounded-[2rem] shadow-xl border border-slate-200 dark:border-slate-800">
                <h3 class="text-xs font-black uppercase mb-4 text-primary tracking-widest">Biblioteca de ExercÃ­cios</h3>
                <input type="text" id="searchEx" placeholder="ðŸ” Buscar na biblioteca..." class="w-full bg-slate-100 dark:bg-slate-800 p-3 rounded-xl mb-4 text-sm outline-none focus:ring-1 focus:ring-primary">
                
                <div id="accordionLib" class="space-y-2 max-h-[600px] overflow-y-auto pr-2 custom-scrollbar">
                    </div>
            </div>
        </aside>

        <section class="lg:col-span-8 space-y-6">
            <div class="flex flex-wrap gap-2 no-print">
                <button onclick="generateLink()" class="bg-primary text-white px-6 py-3 rounded-full font-black text-[10px] uppercase shadow-lg hover:bg-indigo-600 transition admin-ui">Copiar Link do Aluno ðŸ”—</button>
                <button onclick="window.print()" class="bg-slate-700 text-white px-6 py-3 rounded-full font-black text-[10px] uppercase shadow-lg">PDF ðŸ“„</button>
                <button onclick="clearAll()" class="bg-red-500/10 text-red-500 px-6 py-3 rounded-full font-black text-[10px] uppercase admin-ui">Limpar Tudo</button>
            </div>

            <div id="weekDisplay" class="space-y-10"></div>
        </section>
    </main>

    <script>
        // SimulaÃ§Ã£o de base de dados massiva (Exemplificado com grupos, fÃ¡cil expandir para 500+)
        const exerciseLibrary = {
            "Peitorais": ["Supino Reto Barra", "Supino Inclinado Halter", "Supino Declinado", "Crucifixo Reto", "Crucifixo Inclinado", "Peck Deck", "Crossover Alto", "Crossover Baixo", "Crossover MÃ©dio", "FlexÃ£o de BraÃ§os", "Supino Articulado", "Dips (Paralelas)", "Pullover", "Supino Pegada Fechada", "Fly em PÃ© Polia"],
            "Costas": ["Puxada Aberta", "Puxada TriÃ¢ngulo", "Remada Curvada Barra", "Remada Unilateral (Serrote)", "Pulldown Corda", "Levantamento Terra", "Barra Fixa", "Remada Cavalinho", "Remada Baixa", "Remada Articulada", "Puxada Supinada", "ExtensÃ£o Lombar", "Face Pull", "Remada Alta Polia"],
            "QuadrÃ­ceps": ["Agachamento Livre", "Leg Press 45", "Cadeira Extensora", "Agachamento Hack", "Agachamento BÃºlgaro", "Afundo Halteres", "Passada (Walking Lunges)", "Sissy Squat", "Agachamento Frontal", "Leg Press Horizontal"],
            "Posteriores e GlÃºteos": ["Stiff Barra", "Mesa Flexora", "Cadeira Flexora", "Flexora em PÃ©", "ElevaÃ§Ã£o PÃ©lvica", "Cadeira Abdutora", "Cadeira Adutora", "Good Morning", "GlÃºteo Cabo (Coice)", "GlÃºteo MÃ¡quina"],
            "Ombros": ["Desenvolvimento Halter", "Desenvolvimento Arnold", "ElevaÃ§Ã£o Lateral", "ElevaÃ§Ã£o Frontal", "Crucifixo Inverso", "Remada Alta Barra", "Encolhimento Halter", "ElevaÃ§Ã£o Lateral Cabo", "Desenvolvimento Militar"],
            "BÃ­ceps": ["Rosca Direta Barra", "Rosca Alternada", "Rosca Martelo", "Rosca Scott", "Rosca Concentrada", "Rosca Inclinada 45", "Rosca 21", "Rosca Polia Baixa", "Rosca Inversa"],
            "TrÃ­ceps": ["TrÃ­ceps Pulley V", "TrÃ­ceps Corda", "TrÃ­ceps Testa", "TrÃ­ceps FrancÃªs", "Mergulho Banco", "TrÃ­ceps Coice", "Supino Fechado", "TrÃ­ceps Unilateral Inverso"],
            "Panturrilha e Core": ["GÃªmeos em PÃ©", "GÃªmeos Sentado", "GÃªmeos no Leg Press", "Abdominal Supra", "Abdominal Infra", "Prancha IsomÃ©trica", "Russian Twist", "Abdominal Roda", "V-Sit"]
        };

        let workoutData = { student: "", days: { segunda: [], terca: [], quarta: [], quinta: [], sexta: [], sabado: [] } };

        function init() {
            renderLibrary();
            loadFromStorage();
            
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.get('aluno')) {
                workoutData = JSON.parse(atob(urlParams.get('aluno')));
                document.body.classList.add('is-student-mode');
            }
            render();
        }

        function renderLibrary() {
            const container = document.getElementById('accordionLib');
            container.innerHTML = "";
            
            Object.keys(exerciseLibrary).forEach((cat, idx) => {
                const catDiv = document.createElement('div');
                catDiv.className = "border border-slate-200 dark:border-slate-800 rounded-2xl overflow-hidden";
                catDiv.innerHTML = `
                    <button onclick="toggleCat(this)" class="w-full p-4 text-left bg-slate-50 dark:bg-slate-800/50 flex justify-between items-center hover:bg-primary/10 transition">
                        <span class="text-[10px] font-black uppercase tracking-widest">${cat}</span>
                        <span class="text-primary">+</span>
                    </button>
                    <div class="category-content p-2 bg-white dark:bg-slate-900 space-y-1">
                        ${exerciseLibrary[cat].map(ex => `
                            <div onclick="addEx('${ex}')" class="p-2 text-[11px] font-medium hover:bg-primary hover:text-white rounded-lg cursor-pointer transition">
                                ${ex}
                            </div>
                        `).join('')}
                    </div>
                `;
                container.appendChild(catDiv);
            });
        }

        function toggleCat(btn) {
            const content = btn.nextElementSibling;
            content.classList.toggle('active');
            btn.querySelector('span:last-child').innerText = content.classList.contains('active') ? '-' : '+';
        }

        document.getElementById('searchEx').addEventListener('input', function(e) {
            const term = e.target.value.toLowerCase();
            document.querySelectorAll('.category-content div').forEach(el => {
                const match = el.innerText.toLowerCase().includes(term);
                el.style.display = match ? 'block' : 'none';
                if(term.length > 1 && match) el.parentElement.classList.add('active');
            });
        });

        function addEx(name) {
            const day = document.getElementById('daySelector').value;
            workoutData.days[day].push({ n: name, r: "4x12", w: "", bi: false });
            save();
            render();
        }

        function toggleBi(day, idx) {
            workoutData.days[day][idx].bi = !workoutData.days[day][idx].bi;
            save(); render();
        }

        function removeEx(day, idx) {
            workoutData.days[day].splice(idx, 1);
            save(); render();
        }

        function save() {
            workoutData.student = document.getElementById('studentName').value;
            localStorage.setItem('rafael_pro_v3', JSON.stringify(workoutData));
        }

        function loadFromStorage() {
            const saved = localStorage.getItem('rafael_pro_v3');
            if(saved) workoutData = JSON.parse(saved);
        }

        function render() {
            const container = document.getElementById('weekDisplay');
            container.innerHTML = "";
            document.getElementById('studentName').value = workoutData.student;
            document.getElementById('studentDisplayHead').innerText = workoutData.student ? `ALUNO: ${workoutData.student}` : "";

            const dayNames = {segunda: "Segunda-feira", terca: "TerÃ§a-feira", quarta: "Quarta-feira", quinta: "Quinta-feira", sexta: "Sexta-feira", sabado: "SÃ¡bado"};

            Object.keys(workoutData.days).forEach(dayKey => {
                const dayTrain = workoutData.days[dayKey];
                if (dayTrain.length === 0 && document.body.classList.contains('is-student-mode')) return;

                let html = `<div>
                    <h2 class="text-2xl font-black uppercase italic text-primary mb-4 flex items-center gap-2">
                        <span class="w-8 h-8 bg-primary text-white rounded-full flex items-center justify-center text-xs not-italic">${dayKey[0].toUpperCase()}</span>
                        ${dayNames[dayKey]}
                    </h2>
                    <div class="grid grid-cols-1 gap-3">`;

                dayTrain.forEach((ex, idx) => {
                    html += `
                    <div class="workout-item ${ex.bi ? 'is-conjugated' : ''} bg-white dark:bg-slate-900 p-5 rounded-[2rem] shadow-sm border border-slate-200 dark:border-slate-800 flex items-center justify-between transition-all">
                        <div class="flex-1">
                            <h4 class="font-bold text-sm uppercase tracking-tight">${ex.n}</h4>
                            <div class="flex gap-2 mt-3 no-print">
                                <button onclick="toggleBi('${dayKey}', ${idx})" class="edit-btn text-[8px] font-black px-3 py-1.5 rounded-full ${ex.bi ? 'bg-primary text-white' : 'bg-slate-100 dark:bg-slate-800'} transition">CONJUGADO</button>
                                <button onclick="removeEx('${dayKey}', ${idx})" class="edit-btn text-[8px] font-black px-3 py-1.5 rounded-full bg-red-500/10 text-red-500">REMOVER</button>
                            </div>
                        </div>
                        <div class="flex gap-4">
                            <div class="flex flex-col items-center">
                                <span class="text-[7px] uppercase font-black opacity-40 mb-1">RepetiÃ§Ãµes</span>
                                <input type="text" value="${ex.r}" oninput="workoutData.days['${dayKey}'][${idx}].r=this.value;save()" class="w-16 bg-slate-100 dark:bg-slate-800 text-center font-bold text-xs p-2 rounded-xl outline-none focus:ring-1 focus:ring-primary">
                            </div>
                            <div class="flex flex-col items-center">
                                <span class="text-[7px] uppercase font-black opacity-40 mb-1">Carga</span>
                                <input type="text" value="${ex.w}" oninput="workoutData.days['${dayKey}'][${idx}].w=this.value;save()" placeholder="Kg" class="w-14 bg-slate-100 dark:bg-slate-800 text-center font-bold text-xs p-2 rounded-xl outline-none focus:ring-1 focus:ring-primary">
                            </div>
                        </div>
                    </div>`;
                });
                html += `</div></div>`;
                container.innerHTML += html;
            });
        }

        function generateLink() {
            save();
            const encoded = btoa(JSON.stringify(workoutData));
            const url = `${window.location.origin}${window.location.pathname}?aluno=${encoded}`;
            navigator.clipboard.writeText(url);
            alert("Link do aluno copiado!");
        }

        function clearAll() { if(confirm("Apagar tudo?")) { localStorage.removeItem('rafael_pro_v3'); location.reload(); } }
        function updateHeader() { document.getElementById('studentDisplayHead').innerText = `ALUNO: ${document.getElementById('studentName').value}`; save(); }

        init();
    </script>
</body>
</html>
