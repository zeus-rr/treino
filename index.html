<!doctype html>
<html lang="pt-BR" class="dark">
<head>
<link rel="icon" href="https://zeus-rr.github.io/treino/icon.png">
  <link rel="apple-touch-icon" href="https://zeus-rr.github.io/treino/icon.png">
  <link rel="shortcut icon" href=https://zeus-rr.github.io/treino/icon.png">
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>TREINO PERSONAL JAQUE</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class', 
            theme: { extend: { colors: { 'primary': '#6366f1', 'bg-dark': '#0b0f1a' } } }
        }
    </script>
    <style>
        .is-conjugated { margin-bottom: -1rem !important; border-bottom-left-radius: 0 !important; border-bottom-right-radius: 0 !important; border-bottom: 2px dashed #6366f1 !important; z-index: 10; }
        .is-conjugated + .workout-item { border-top-left-radius: 0 !important; border-top-right-radius: 0 !important; }
        .is-student-mode .admin-ui, .is-student-mode .edit-btn, .is-student-mode #btnTutorial { display: none !important; }
        .is-student-mode main { grid-template-columns: 1fr !important; }
        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #6366f1; border-radius: 10px; }
        .category-content { display: none; }
        .category-content.active { display: block; }
        @media print { .no-print { display: none !important; } body { background: white !important; color: black !important; } }
        body { transition: background-color 0.3s ease, color 0.3s ease; }
        
        /* Modal Style */
        #tutorialModal { display: none; }
        #tutorialModal.active { display: flex; }
    </style>
</head>
<body class="bg-slate-100 dark:bg-[#0b0f1a] text-slate-800 dark:text-slate-100 font-sans antialiased">

    <div id="tutorialModal" class="fixed inset-0 z-[100] bg-slate-900/90 backdrop-blur-sm p-4 items-center justify-center">
        <div class="bg-white dark:bg-slate-900 w-full max-w-2xl max-h-[90vh] rounded-[2.5rem] overflow-hidden flex flex-col shadow-2xl border border-slate-200 dark:border-slate-800">
            <div class="p-6 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center">
                <h2 class="text-xl font-black uppercase italic text-primary">Guia de Uso - Prof. Jaque</h2>
                <button onclick="toggleTutorial()" class="text-slate-400 hover:text-red-500 font-bold text-2xl">&times;</button>
            </div>
            <div class="p-8 overflow-y-auto custom-scrollbar space-y-8">
                <div class="flex gap-4">
                    <div class="w-12 h-12 bg-primary/10 text-primary rounded-2xl flex items-center justify-center font-black shrink-0">01</div>
                    <div>
                        <h4 class="font-bold uppercase text-sm mb-1">Identifique o Aluno</h4>
                        <p class="text-xs opacity-70 mb-3">Digite o nome e selecione o dia que deseja montar o treino primeiro.</p>
                        <div class="bg-slate-100 dark:bg-slate-800 p-3 rounded-xl border border-dashed border-slate-300 dark:border-slate-700">
                            <div class="h-4 w-3/4 bg-slate-300 dark:bg-slate-700 rounded mb-2"></div>
                            <div class="h-4 w-1/2 bg-primary/30 rounded"></div>
                        </div>
                    </div>
                </div>
                <div class="flex gap-4">
                    <div class="w-12 h-12 bg-primary/10 text-primary rounded-2xl flex items-center justify-center font-black shrink-0">02</div>
                    <div>
                        <h4 class="font-bold uppercase text-sm mb-1">Adicione Exerc√≠cios</h4>
                        <p class="text-xs opacity-70 mb-3">Use a biblioteca lateral. Clique na categoria e depois no exerc√≠cio para envi√°-lo ao painel.</p>
                        <div class="flex gap-2">
                            <div class="px-3 py-1 bg-primary text-white text-[10px] rounded-full font-bold">Peitorais +</div>
                            <div class="px-3 py-1 bg-slate-200 dark:bg-slate-700 text-[10px] rounded-full font-bold opacity-50">Costas +</div>
                        </div>
                    </div>
                </div>
                <div class="flex gap-4">
                    <div class="w-12 h-12 bg-primary/10 text-primary rounded-2xl flex items-center justify-center font-black shrink-0">03</div>
                    <div>
                        <h4 class="font-bold uppercase text-sm mb-1">Combine Treinos (Bi-set)</h4>
                        <p class="text-xs opacity-70 mb-3">Clique no bot√£o <span class="text-primary font-bold">CONJUGADO</span> para unir dois exerc√≠cios visualmente, indicando que devem ser feitos sem descanso.</p>
                    </div>
                </div>
                <div class="flex gap-4">
                    <div class="w-12 h-12 bg-primary/10 text-primary rounded-2xl flex items-center justify-center font-black shrink-0">04</div>
                    <div>
                        <h4 class="font-bold uppercase text-sm mb-1">Compartilhe o Link</h4>
                        <p class="text-xs opacity-70 mb-3">Clique em <span class="bg-primary text-white px-2 py-0.5 rounded text-[10px]">COPIAR LINK</span>. O link gerado j√° cont√©m todos os dados e abre direto no modo de visualiza√ß√£o para o aluno.</p>
                    </div>
                </div>
            </div>
            <div class="p-6 bg-slate-50 dark:bg-slate-800/50 text-center">
                <button onclick="toggleTutorial()" class="bg-primary text-white px-8 py-3 rounded-full font-black uppercase text-xs shadow-lg shadow-primary/30 hover:scale-105 transition-transform">Entendi, vamos l√°!</button>
            </div>
        </div>
    </div>

    <header class="p-4 border-b border-slate-200 dark:border-slate-800 bg-white/80 dark:bg-slate-900/80 backdrop-blur-md sticky top-0 z-50">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <h1 class="text-xl font-black italic uppercase tracking-tighter">PERSONAL<span class="text-primary">JAQUE</span></h1>
            
            <div class="flex items-center gap-3">
                <div id="studentDisplayHead" class="text-sm font-bold text-primary hidden sm:block"></div>
                
                <button id="btnTutorial" onclick="toggleTutorial()" class="flex items-center gap-2 bg-slate-100 dark:bg-slate-800 text-slate-500 px-3 py-2 rounded-xl text-[10px] font-black uppercase border border-slate-200 dark:border-slate-700 transition-all hover:bg-primary/10 hover:text-primary">
                    Como usar? ‚ùì
                </button>

                <a href="https://wa.me/5515981776856?text=Ol√°%20Professora%20Jaque,%20gostaria%20de%20tirar%20uma%20d√∫vida%20sobre%20meu%20treino!" 
                   target="_blank" 
                   class="hidden sm:flex items-center gap-2 bg-green-500 hover:bg-green-600 text-white px-3 py-2 rounded-xl text-[10px] font-black uppercase transition-all">
                   Suporte
                </a>

                <button onclick="toggleTheme()" class="p-2 rounded-xl bg-slate-100 dark:bg-slate-800 hover:bg-primary/20 transition-all border border-slate-200 dark:border-slate-700">
                    <span class="dark:hidden">üåô</span>
                    <span class="hidden dark:inline">‚òÄÔ∏è</span>
                </button>
            </div>
        </div>
    </header>

    <a href="https://wa.me/5515981776856?text=Ol√°%20Professora%20Jaque,%20gostaria%20de%20tirar%20uma%20d√∫vida%20sobre%20meu%20treino!" 
       target="_blank" 
       class="fixed bottom-6 right-6 z-[60] bg-green-500 text-white p-4 rounded-full shadow-2xl hover:scale-110 active:scale-95 transition-all flex items-center justify-center group no-print">
       <svg class="w-7 h-7" fill="currentColor" viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L0 24l6.335-1.662c1.72.94 3.675 1.437 5.662 1.438h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/></svg>
    </a>

    <main class="max-w-[1600px] mx-auto p-4 grid grid-cols-1 lg:grid-cols-12 gap-6">
        <aside class="lg:col-span-4 space-y-4 admin-ui">
            <div class="bg-white dark:bg-slate-900 p-6 rounded-[2rem] shadow-xl border border-slate-200 dark:border-slate-800">
                <label class="text-[10px] font-bold uppercase opacity-50 ml-2">Identifica√ß√£o do Aluno</label>
                <input type="text" id="studentName" oninput="updateHeader()" placeholder="Nome do Aluno" class="w-full bg-slate-100 dark:bg-slate-800 p-3 rounded-xl border-none outline-none focus:ring-2 focus:ring-primary mb-3 font-bold">
                <select id="daySelector" class="w-full bg-slate-100 dark:bg-slate-800 p-3 rounded-xl border-none outline-none focus:ring-2 focus:ring-primary font-bold text-sm">
                    <option value="segunda">Segunda-feira</option>
                    <option value="terca">Ter√ßa-feira</option>
                    <option value="quarta">Quarta-feira</option>
                    <option value="quinta">Quinta-feira</option>
                    <option value="sexta">Sexta-feira</option>
                    <option value="sabado">S√°bado</option>
                </select>
            </div>

            <div class="bg-white dark:bg-slate-900 p-6 rounded-[2rem] shadow-xl border border-slate-200 dark:border-slate-800">
                <h3 class="text-xs font-black uppercase mb-4 text-primary tracking-widest">Biblioteca de Exerc√≠cios</h3>
                <input type="text" id="searchEx" placeholder="üîç Buscar na biblioteca..." class="w-full bg-slate-100 dark:bg-slate-800 p-3 rounded-xl mb-4 text-sm outline-none focus:ring-1 focus:ring-primary">
                <div id="accordionLib" class="space-y-2 max-h-[500px] overflow-y-auto pr-2 custom-scrollbar"></div>
            </div>
        </aside>

        <section class="lg:col-span-8 space-y-6">
            <div class="flex flex-wrap gap-2 no-print">
                <button onclick="generateLink()" class="bg-primary text-white px-6 py-3 rounded-full font-black text-[10px] uppercase shadow-lg hover:bg-indigo-600 transition admin-ui">Copiar Link üîó</button>
                <button onclick="window.print()" class="bg-slate-700 text-white px-6 py-3 rounded-full font-black text-[10px] uppercase shadow-lg">Gerar PDF üìÑ</button>
                <button onclick="clearAll()" class="bg-red-500/10 text-red-500 px-6 py-3 rounded-full font-black text-[10px] uppercase admin-ui">Limpar Tudo</button>
            </div>
            <div id="weekDisplay" class="space-y-10"></div>
            <div class="bg-white dark:bg-slate-900 p-6 rounded-[2rem] border border-slate-200 dark:border-slate-800 mt-8">
                <h3 class="text-xs font-black uppercase mb-4 text-primary tracking-widest">Observa√ß√µes Gerais do Treino</h3>
                <textarea id="generalNotes" oninput="save()" class="w-full bg-slate-100 dark:bg-slate-800 p-4 rounded-xl text-sm outline-none focus:ring-1 focus:ring-primary min-h-[100px]" placeholder="Dicas gerais..."></textarea>
            </div>
        </section>
    </main>

    <script>
        // Dados e Biblioteca (Mesmos da vers√£o anterior)
        const exerciseLibrary = {
            "C√°rdio (Bike e Transport)": ["Bicicleta Ergom√©trica (Moderado)", "Bicicleta Ergom√©trica (Intervalado/HIIT)", "Transport (Eliptico) - Resist√™ncia Alta", "Transport (Eliptico) - Velocidade", "Spinning Individual", "Air Bike (Assault Bike)"],
            "Exerc√≠cios com Bola (Swiss Ball)": ["Abdominal na Bola", "Ponte na Bola", "Extens√£o Lombar na Bola", "Agachamento com Bola na Parede", "Prancha com Antebra√ßo na Bola", "Passagem de Bola (M√£os para P√©s)"],
            "Equil√≠brio e Estabilidade": ["Equil√≠brio Unipodal (Ch√£o)", "Equil√≠brio no Bosu", "Avi√£ozinho (Propriocep√ß√£o)", "Agachamento no Disco de Equil√≠brio", "Prancha Lateral Din√¢mica", "Passada em Superf√≠cie Inst√°vel"],
            "Peitorais": ["Supino Reto Barra", "Supino Inclinado Halter", "Supino Declinado", "Crucifixo Reto", "Crucifixo Inclinado", "Peck Deck", "Crossover Alto", "Crossover Baixo", "Crossover M√©dio", "Flex√£o de Bra√ßos", "Supino Articulado", "Dips (Paralelas)", "Pullover", "Supino Pegada Fechada", "Fly em P√© Polia"],
            "Costas": ["Puxada Aberta", "Puxada Tri√¢ngulo", "Remada Curvada Barra", "Remada Unilateral (Serrote)", "Pulldown Corda", "Levantamento Terra", "Barra Fixa", "Remada Cavalinho", "Remada Baixa", "Remada Articulada", "Puxada Supinada", "Extens√£o Lombar", "Face Pull", "Remada Alta Polia"],
            "Quadr√≠ceps": ["Agachamento Livre", "Leg Press 45", "Cadeira Extensora", "Agachamento Hack", "Agachamento B√∫lgaro", "Afundo Halteres", "Passada (Walking Lunges)", "Sissy Squat", "Agachamento Frontal", "Leg Press Horizontal"],
            "Posteriores e Gl√∫teos": ["Stiff Barra", "Mesa Flexora", "Cadeira Flexora", "Flexora em P√©", "Eleva√ß√£o P√©lvica", "Cadeira Abdutora", "Cadeira Adutora", "Good Morning", "Gl√∫teo Cabo (Coice)", "Gl√∫teo M√°quina"],
            "Ombros": ["Desenvolvimento Halter", "Desenvolvimento Arnold", "Eleva√ß√£o Lateral", "Eleva√ß√£o Frontal", "Crucifixo Inverso", "Remada Alta Barra", "Encolhimento Halter", "Eleva√ß√£o Lateral Cabo", "Desenvolvimento Militar"],
            "B√≠ceps": ["Rosca Direta Barra", "Rosca Alternada", "Rosca Martelo", "Rosca Scott", "Rosca Concentrada", "Rosca Inclinada 45", "Rosca 21", "Rosca Polia Baixa", "Rosca Inversa"],
            "Tr√≠ceps": ["Tr√≠ceps Pulley V", "Tr√≠ceps Corda", "Tr√≠ceps Testa", "Tr√≠ceps Franc√™s", "Mergulho Banco", "Tr√≠ceps Coice", "Supino Fechado", "Tr√≠ceps Unilateral Inverso"],
            "Panturrilha e Core": ["G√™meos em P√©", "G√™meos Sentado", "G√™meos no Leg Press", "Abdominal Supra", "Abdominal Infra", "Prancha Isom√©trica", "Russian Twist", "Abdominal Roda", "V-Sit"],
        };

        let workoutData = { student: "", generalNotes: "", days: { segunda: [], terca: [], quarta: [], quinta: [], sexta: [], sabado: [] } };

        function toggleTutorial() {
            document.getElementById('tutorialModal').classList.toggle('active');
        }

        function toggleTheme() {
            const html = document.documentElement;
            if (html.classList.contains('dark')) {
                html.classList.remove('dark');
                localStorage.setItem('theme_jaque', 'light');
            } else {
                html.classList.add('dark');
                localStorage.setItem('theme_jaque', 'dark');
            }
        }

        function init() {
            const savedTheme = localStorage.getItem('theme_jaque');
            if (savedTheme === 'light') document.documentElement.classList.remove('dark');
            else document.documentElement.classList.add('dark');

            renderLibrary();
            loadFromStorage();
            
            const urlParams = new URLSearchParams(window.location.search);
            const alunoData = urlParams.get('aluno');
            
            if (alunoData) {
                try {
                    const decoded = decodeURIComponent(atob(alunoData).split('').map(c => '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2)).join(''));
                    workoutData = JSON.parse(decoded);
                    document.body.classList.add('is-student-mode');
                } catch(e) { console.error("Erro ao carregar link"); }
            }
            render();
        }

        // Fun√ß√µes de Renderiza√ß√£o (Mantidas da vers√£o anterior com corre√ß√µes)
        function renderLibrary() {
            const container = document.getElementById('accordionLib');
            container.innerHTML = "";
            Object.keys(exerciseLibrary).forEach((cat) => {
                const catDiv = document.createElement('div');
                catDiv.className = "border border-slate-200 dark:border-slate-800 rounded-2xl overflow-hidden mb-2";
                catDiv.innerHTML = `
                    <button onclick="toggleCat(this)" class="w-full p-4 text-left bg-slate-50 dark:bg-slate-800/50 flex justify-between items-center hover:bg-primary/10 transition">
                        <span class="text-[10px] font-black uppercase tracking-widest">${cat}</span>
                        <span class="text-primary">+</span>
                    </button>
                    <div class="category-content p-2 bg-white dark:bg-slate-900 space-y-1">
                        ${exerciseLibrary[cat].map(ex => `<div onclick="addEx('${ex}')" class="p-2 text-[11px] font-medium hover:bg-primary hover:text-white rounded-lg cursor-pointer transition">${ex}</div>`).join('')}
                    </div>
                `;
                container.appendChild(catDiv);
            });
        }

        function toggleCat(btn) {
            const content = btn.nextElementSibling;
            content.classList.toggle('active');
            btn.querySelector('span:last-child').innerText = content.classList.contains('active') ? '-' : '+';
        }

        function addEx(name) {
            const day = document.getElementById('daySelector').value;
            workoutData.days[day].push({ n: name, r: "3x12", w: "", obs: "", bi: false });
            save(); render();
        }

        function save() {
            workoutData.student = document.getElementById('studentName').value;
            workoutData.generalNotes = document.getElementById('generalNotes').value;
            localStorage.setItem('jaque_pro_v2', JSON.stringify(workoutData));
        }

        function loadFromStorage() {
            const saved = localStorage.getItem('jaque_pro_v2');
            if(saved) workoutData = {...workoutData, ...JSON.parse(saved)};
        }

        function render() {
            const container = document.getElementById('weekDisplay');
            container.innerHTML = "";
            document.getElementById('studentName').value = workoutData.student || "";
            document.getElementById('generalNotes').value = workoutData.generalNotes || "";
            document.getElementById('studentDisplayHead').innerText = workoutData.student ? `ALUNO: ${workoutData.student}` : "";

            const dayNames = {segunda: "Segunda-feira", terca: "Ter√ßa-feira", quarta: "Quarta-feira", quinta: "Quinta-feira", sexta: "Sexta-feira", sabado: "S√°bado"};

            Object.keys(workoutData.days).forEach(dayKey => {
                const dayTrain = workoutData.days[dayKey];
                if (dayTrain.length === 0 && document.body.classList.contains('is-student-mode')) return;

                let html = `<div class="day-section">
                    <h2 class="text-2xl font-black uppercase italic text-primary mb-4 flex items-center gap-2">
                        <span class="w-8 h-8 bg-primary text-white rounded-full flex items-center justify-center text-xs not-italic">${dayKey[0].toUpperCase()}</span>
                        ${dayNames[dayKey]}
                    </h2>
                    <div class="grid grid-cols-1 gap-3">`;

                dayTrain.forEach((ex, idx) => {
                    html += `
                    <div class="workout-item ${ex.bi ? 'is-conjugated' : ''} bg-white dark:bg-slate-900 p-5 rounded-[2rem] shadow-sm border border-slate-200 dark:border-slate-800 transition-all">
                        <div class="flex items-start justify-between">
                            <div class="flex-1">
                                <h4 class="font-bold text-sm uppercase tracking-tight">${ex.n}</h4>
                                <input type="text" value="${ex.obs || ''}" oninput="workoutData.days['${dayKey}'][${idx}].obs=this.value;save()" class="w-full mt-2 bg-transparent border-b border-dashed border-slate-300 dark:border-slate-700 text-[10px] outline-none italic" placeholder="Obs...">
                                <div class="flex gap-2 mt-3 no-print">
                                    <button onclick="toggleBi('${dayKey}', ${idx})" class="edit-btn text-[8px] font-black px-3 py-1.5 rounded-full ${ex.bi ? 'bg-primary text-white' : 'bg-slate-100 dark:bg-slate-800'}">CONJUGADO</button>
                                    <button onclick="removeEx('${dayKey}', ${idx})" class="edit-btn text-[8px] font-black px-3 py-1.5 rounded-full bg-red-500/10 text-red-500">REMOVER</button>
                                </div>
                            </div>
                            <div class="flex gap-4 ml-4">
                                <div class="flex flex-col items-center">
                                    <span class="text-[7px] font-black opacity-40 mb-1 uppercase">S√©ries</span>
                                    <input type="text" value="${ex.r}" oninput="workoutData.days['${dayKey}'][${idx}].r=this.value;save()" class="w-16 bg-slate-100 dark:bg-slate-800 text-center font-bold text-xs p-2 rounded-xl">
                                </div>
                                <div class="flex flex-col items-center">
                                    <span class="text-[7px] font-black opacity-40 mb-1 uppercase">Carga</span>
                                    <input type="text" value="${ex.w}" oninput="workoutData.days['${dayKey}'][${idx}].w=this.value;save()" class="w-14 bg-slate-100 dark:bg-slate-800 text-center font-bold text-xs p-2 rounded-xl">
                                </div>
                            </div>
                        </div>
                    </div>`;
                });
                html += `</div></div>`;
                container.innerHTML += html;
            });
        }

        function toggleBi(day, idx) { workoutData.days[day][idx].bi = !workoutData.days[day][idx].bi; save(); render(); }
        function removeEx(day, idx) { if(confirm("Remover?")) { workoutData.days[day].splice(idx, 1); save(); render(); } }
        function updateHeader() { updateHeaderReal(); }
        function updateHeaderReal() { document.getElementById('studentDisplayHead').innerText = `ALUNO: ${document.getElementById('studentName').value}`; save(); }
        
        function generateLink() {
            save();
            const jsonStr = JSON.stringify(workoutData);
            const encoded = btoa(encodeURIComponent(jsonStr).replace(/%([0-9A-F]{2})/g, (match, p1) => String.fromCharCode('0x' + p1)));
            const url = `${window.location.origin}${window.location.pathname}?aluno=${encoded}`;
            navigator.clipboard.writeText(url);
            alert("Link copiado!");
        }

        function clearAll() { if(confirm("Limpar tudo?")) { localStorage.removeItem('jaque_pro_v2'); location.reload(); } }

        init();
    </script>
</body>
</html>
